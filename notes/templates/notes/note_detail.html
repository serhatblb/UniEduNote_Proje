{% extends "notes/base.html" %}
{% block title %}{{ note.title }} Detay{% endblock %}

{% block content %}
<style>
  body{background:#f4f6fa;}
  .layout{display:flex;min-height:100vh;}
  .sidebar{
    width:240px;background:linear-gradient(180deg,#00205B,#001540);
    color:#fff;display:flex;flex-direction:column;justify-content:space-between;
    padding:1.5rem 1rem;position:fixed;left:0;top:0;bottom:0;transition:transform .3s;
  }
  .sidebar h3{font-size:1.1rem;text-align:center;margin-bottom:2rem;}
  .sidebar a{color:#fff;text-decoration:none;display:block;padding:.6rem 1rem;
    border-radius:.5rem;margin-bottom:.3rem;transition:background .2s;}
  .sidebar a:hover,.sidebar a.active{background:rgba(255,255,255,.15);}
  .sidebar-footer small{color:#ccc;text-align:center;display:block;}
  .main-content{flex:1;margin-left:240px;padding:2rem 2.5rem;}
  @media(max-width:992px){.sidebar{transform:translateX(-100%);}
    .sidebar.show{transform:translateX(0);}
    .main-content{margin-left:0;padding:1.5rem;}
    .toggle-btn{display:block;}}
  .toggle-btn{
    position:fixed;top:15px;left:15px;background:#00205B;color:#fff;border:none;
    border-radius:6px;padding:.5rem .7rem;z-index:1000;cursor:pointer;display:none;
  }

  /* === CARD === */
  .detail-card{
    background:#fff;border-radius:16px;box-shadow:0 4px 15px rgba(0,0,0,.07);
    padding:2rem;max-width:800px;margin:auto;
  }
  h1{color:#00205B;font-weight:700;margin-bottom:1rem;}
  .badges span{
    display:inline-block;background:#f3f4f6;color:#374151;font-size:.85rem;
    padding:.4rem .7rem;border-radius:8px;margin:.2rem;
  }
  .desc{font-size:1.05rem;line-height:1.6;color:#374151;margin-top:1rem;}
  hr{margin:2rem 0;border-top:1px solid #e5e7eb;}
  .meta{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;}
  .meta small{color:#6b7280;}
  .btn-download{background:#10B981;color:#fff;border:none;padding:.6rem 1rem;
    border-radius:8px;font-weight:600;}
  .btn-download:hover{background:#0e906f;}
  .back-links{margin-top:1.5rem;display:flex;gap:.6rem;flex-wrap:wrap;}
  .btn-back{background:#00205B;color:#fff;padding:.5rem 1rem;border-radius:8px;text-decoration:none;}
  .btn-back:hover{background:#001b4a;}
  .btn-secondary{border:1px solid #d1d5db;color:#374151;text-decoration:none;
    padding:.5rem 1rem;border-radius:8px;}
  .btn-secondary:hover{background:#f3f4f6;}
</style>

<button class="toggle-btn" id="toggleSidebar">☰</button>

<div class="layout">
  <div class="sidebar" id="sidebar">
    <div>
      <h3>📚 UniEduNote</h3>
      <a href="{% url 'dashboard' %}">🏠 Ana Sayfa</a>
      <a href="{% url 'note_list' %}" class="active">🔍 Notları Keşfet</a>
      <a href="{% url 'upload_note' %}">⬆️ Not Yükle</a>
    </div>
    <div class="sidebar-footer"><small>© 2025 UniEduNote</small></div>
  </div>

  <div class="main-content">
    <div class="detail-card">
      <h1>{{ note.title }}</h1>
      <div class="badges">
        <span>{{ note.course.code }} - {{ note.course.name }}</span>
        <span>{{ note.course.semester.department.university.name }}</span>
        <span>{{ note.course.semester.department.name }}</span>
          <span class="badge bg-success">
        ⬇️ {{ note.download_count }} İndirme
    </span>
      </div>

      <p class="desc">{{ note.description }}</p>

      <hr>
      <div class="meta">
        <div>
          <small>👤 Yükleyen: <b>{{ note.uploader.username }}</b></small><br>
          <small>📅 Tarih: {{ note.upload_date|date:"d M Y" }}</small>
        </div>
          {% if note.uploader == request.user %}
            <a href="{% url 'delete_note' pk=note.pk %}" class="btn btn-danger">Sil</a>

            <a href="{% url 'edit_note' pk=note.pk %}" class="btn btn-warning">Düzenle</a>
        {% endif %}
        <a href="{% url 'download_note' pk=note.pk %}" class="btn btn-lg btn-success">
            <i class="fas fa-download me-2"></i> Dosyayı İndir
        </a>
      </div>

      <div class="back-links">
        <a href="{% url 'note_list' %}" class="btn-back">← Tüm Notlara Dön</a>
        <a href="{% url 'dashboard' %}" class="btn-secondary">🏠 Ana Sayfa</a>
      </div>
    </div>
  </div>
</div>

<script>
  const toggleBtn=document.getElementById('toggleSidebar');
  const sidebar=document.getElementById('sidebar');
  toggleBtn.addEventListener('click',()=>sidebar.classList.toggle('show'));
</script>
{% endblock %}
